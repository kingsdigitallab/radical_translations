{% extends "base.html" %}

{% block main %}
<h1>{{ object.title }}</h1>

<p class="metadata">
    <span class="metadata-block">
        <span{% if object.date.date_radical %} class="radical"{% endif %}>
            {# Font Awesome Mars icon #}
            {% include "svgs/solid/calendar.svg" %}
            {{ object.date }}
        </span>
    </span>
    <span class="metadata-block">
        {% for subject in object.subjects.all %}
        {{ subject.label }}{% if not forloop.last %}, {% endif %}
        {% endfor %}
    </span>
    {% if object.edition_enumeration %}
    <span class="metadata-block">
        {{ object.edition_enumeration }}
    </span>
    {% endif %}
    <span class="metadata-block">
        {% for classification in object.classifications.all %}
        {{ classification.edition.label }}{% if not forloop.last %}, {% endif %}
        {% endfor %}
    </span>
    <span class="metadata-block">
        {# Custom language icon "language2.svg" #}
        {% include "svgs/solid/language2.svg" %}
        {% for language in object.languages.all %}
        {{ language }}{% if not forloop.last %}, {% endif %}
        {% endfor %}
    </span>
    {% if object.places.all %}
    <span class="metadata-block">
        {# Font Awesome map-marker-alt icon #}
        {% include "svgs/solid/map-marker-alt.svg" %}
        {% for place in object.places.all %}
        {{ place }}{% if not forloop.last %}, {% endif %}
        {% endfor %}
    </span>
    {% endif %}
    {% if object.electronic_locator %}
    <span class="metadata-block">
        {# Font Awesome map-marker-alt icon #}
        {% include "svgs/solid/external-link-alt.svg" %}
        <a class="badge badge-info" href="{{ object.electronic_locator }}">URL</a>
    </span>
    {% endif %}
</p>

{% if object.is_translation %}
<h2>Authors of source text</h2>
<p>
    {% for author in object.get_authors_source_text %}
    <a href="{% url 'agent-detail' author.pk %}">{{ author.name }}</a>
    {% endfor %}
</p>
{% endif %}

{% if object.contributions.count %}
<h2>Contributions</h2>
<dl>
    {% for contribution in object.contributions.all %}
    <dt>
        <a href="{% url 'agent-detail' contribution.agent.pk %}">{{ contribution.agent.name }}</a>
    </dt>
    {% for role in contribution.roles.all %}
    <dd>{{ role.label }}</dd>
    {% endfor %}
    {% for classification in contribution.classification.all %}
    <dd class="{{ classification.label }}">{{ classification.label }}</dd>
    {% endfor %}
    {% endfor %}
</dl>
{% endif %}

{% if object.relationships.count or object.related_to.count %}
<h2>Related resources</h2>
<dl>
    {% if object.relationships.count %}
    {% for relationship in object.relationships.all %}
    <dt>{{ relationship.relationship_type.label }}</dt>
    <dd>
        <a href="{% url 'resource-detail' relationship.related_to.pk %}">{{ relationship.related_to.title }}</a>
    </dd>
    {% for classification in relationship.classification.all %}
    <dd class="{{ classification.label }}">{{ classification.label }}</dd>
    {% endfor %}
    {% endfor %}
    {% endif %}

    {% if object.related_to.count %}
    {% for relationship in object.related_to.all %}
    <dt>has {{ relationship.relationship_type.label|cut:' of' }}</dt>
    <dd>
        <a href="{% url 'resource-detail' relationship.resource.pk %}">{{ relationship.resource.title }}</a>
    </dd>
    {% for classification in relationship.classification.all %}
    <dd class="{{ classification.label }}">{{ classification.label }}</dd>
    {% endfor %}
    {% endfor %}
    {% endif %}
</dl>
{% endif %}

{% if object.events.count %}
<h2>Events</h2>
<ul>
    {% for event in object.events.all %}
    <li>
        <a href="{% url 'event-detail' event.pk %}">{{ event }}</a>
    </li>
    {% endfor %}
</ul>
{% endif %}

{% if object.summary %}
<h2>Summary</h2>
<p>{{ object.summary }}</p>
{% endif %}

{% if object.held_by.count %}
<h2>Held by</h2>
<ul>
    {% for agent in object.held_by.all %}
    <li><a href="{% url 'agent-detail' agent.pk %}">{{ agent.name }}</a></li>
    {% endfor %}
</ul>
{% endif %}

{% include "includes/object_notes.html" %}
{% endblock main %}
