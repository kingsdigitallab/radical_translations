{% load menu_tags static i18n %}

{# Nav collapsed on homepage / expanded on other pages while on lg screens #}

{% if page.url == '/' %}
<div class="d-none d-md-block navbar main-menu{% if page.url == '/' %} homepage-menu{% endif %}">
    <button class="navbar-toggler" type="button"
          data-toggle="collapse" data-target="#collapsedMainMenu"
          aria-controls="collapsedMainMenu" aria-expanded="false"
          aria-label="Toggle navigation">
      <span class="navbar-toggler-icon">
        {# Custom hamburger menu icon #}
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg>
      </span>
      Menu
    </button>
    {# Custom curly brackets icon #}
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 51" class="curly-brackets">
        <g>
            <path d="M0-0.4h3.9c0.1,4.5,1.1,8,3,10.3c1.9,2.3,5.8,4,12,4.8c6.1,0.9,15.7,1.3,28.8,1.3c12.4,0,22.1,1.4,29.1,4.1
                c7,2.8,12.2,6.4,15.6,10.8c3.4,4.5,5.8,9.3,7.3,14.5c1.5-5.2,4-10.1,7.4-14.5c3.4-4.5,8.6-8.1,15.6-10.8c6.9-2.7,16.6-4.1,29-4.1
                c10.2,0,18.2-0.2,24.1-0.7c5.9-0.5,10.3-1.3,13.3-2.5c3-1.2,4.9-2.9,5.8-5.1c0.9-2.2,1.3-4.9,1.3-8.2h3.9c0,8.7-1.4,15.6-4.2,20.7
                c-2.8,5.2-7.7,8.8-14.7,11c-7,2.2-16.8,3.3-29.5,3.3c-12.9,0-22.9,0.4-30,1.3c-7.1,0.9-12.1,2.4-15.2,4.6c-3,2.2-4.7,5.4-4.9,9.7v1
                h-3.7v-1c-0.3-4.3-1.9-7.5-4.8-9.7c-3-2.2-8-3.7-15.2-4.6c-7.1-0.9-17.2-1.3-30.1-1.3c-12.1,0-21.6-1.1-28.6-3.3
                c-6.9-2.2-11.9-5.9-14.7-11C1.4,15.2,0,8.3,0-0.4z"/>
        </g>
    </svg>
</div>
{% endif %}

<nav class="{% if page.url != '/' %} navbar-expand-lg{% endif %}collapse navbar navbar-expand-md main-menu{% if page.url != '/' %} d-none d-sm-none d-md-block{% endif %}" id="collapsedMainMenu">
    {% block main_menu %}
    {% main_menu %}
    {% endblock %}
</nav>

{# Nav always collapsed nav for small screens #}

<div class="d-block d-sm-block d-md-none">
  <nav class="navbar main-menu{% if page.url == '/' %} homepage-menu{% endif %}">
      <button class="navbar-toggler" type="button"
            data-toggle="collapse" data-target="#collapsedMainMenuSmallScreen"
            aria-controls="collapsedMainMenu" aria-expanded="false"
            aria-label="Toggle navigation">
        <span class="navbar-toggler-icon">
          {# Custom hamburger menu icon #}
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg>
        </span>
        Menu
      </button>

      {# Custom curly brackets icon #}
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 51" class="curly-brackets">
          <g>
              <path d="M0-0.4h3.9c0.1,4.5,1.1,8,3,10.3c1.9,2.3,5.8,4,12,4.8c6.1,0.9,15.7,1.3,28.8,1.3c12.4,0,22.1,1.4,29.1,4.1
                  c7,2.8,12.2,6.4,15.6,10.8c3.4,4.5,5.8,9.3,7.3,14.5c1.5-5.2,4-10.1,7.4-14.5c3.4-4.5,8.6-8.1,15.6-10.8c6.9-2.7,16.6-4.1,29-4.1
                  c10.2,0,18.2-0.2,24.1-0.7c5.9-0.5,10.3-1.3,13.3-2.5c3-1.2,4.9-2.9,5.8-5.1c0.9-2.2,1.3-4.9,1.3-8.2h3.9c0,8.7-1.4,15.6-4.2,20.7
                  c-2.8,5.2-7.7,8.8-14.7,11c-7,2.2-16.8,3.3-29.5,3.3c-12.9,0-22.9,0.4-30,1.3c-7.1,0.9-12.1,2.4-15.2,4.6c-3,2.2-4.7,5.4-4.9,9.7v1
                  h-3.7v-1c-0.3-4.3-1.9-7.5-4.8-9.7c-3-2.2-8-3.7-15.2-4.6c-7.1-0.9-17.2-1.3-30.1-1.3c-12.1,0-21.6-1.1-28.6-3.3
                  c-6.9-2.2-11.9-5.9-14.7-11C1.4,15.2,0,8.3,0-0.4z"/>
          </g>
      </svg>

      <div class="collapse navbar-collapse main-menu" id="collapsedMainMenuSmallScreen">
          {% main_menu %}
      </div>
  </nav>
</div>
