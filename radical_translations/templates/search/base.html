{% extends "base.html" %}
{% load staticfiles %}

{% block css %}
{{ block.super }}
<link href="{% static 'leaflet/dist/leaflet.css' %}" rel="stylesheet">
{% endblock css %}

{% block main %}

{% block search_body %}
<div id="app">
    <div class="container">
        <h1>{% block search_header %}{% endblock search_header %}</h1>

        <div class="row">
            <div class="col">
                <div class="row alert alert-secondary">
                    <div class="col">
                        {% include 'vue/search_query.html' %}
                        {% include 'vue/search_facets.html' %}
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div class="row">
                    <div class="col">
                        {% include 'vue/search_summary.html' %}
                        {% include 'vue/search_ordering.html' %}
                    </div>
                </div>

                {% include 'vue/pagination.html' %}

                <button @click="map.show = !map.show">Toggle map</button>

                <template v-if="map.show">
                    {% include 'vue/search_results_map.html' %}
                </template>
                <template v-else>
                    {% include 'vue/search_results.html' %}
                </template>

                {% include 'vue/pagination.html' %}
            </div>
        </div>
    </div>
    <div id="map"></div>
</div>
{% endblock search_body %}
{% endblock main %}

{% block javascript %}
{{ block.super }}

<script src="{% static 'vue-slider-component/dist/vue-slider-component.umd.min.js' %}"></script>
<script src="{% static 'leaflet/dist/leaflet.js' %}"></script>
<script src="{% static 'leaflet.markercluster/dist/leaflet.markercluster.js' %}"></script>
<script src="{% static 'vue2-leaflet/dist/vue2-leaflet.min.js' %}"></script>
<script src="{% static 'js/Vue2LeafletMarkerCluster.js' %}"></script>
<script src="{% static 'js/search.js' %}"></script>
{% endblock javascript %}
