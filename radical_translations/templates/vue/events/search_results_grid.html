<div class="viz-grid">
  <p>The main function of this timeline is to correlate events and texts. This was only
  done for United Kingdom, France, Italy, Ireland and the United States. The other
  countries in the timeline  only relate to place of publication and do not have an
  accompanying political chronology.</p>

  <div class="alert alert-secondary">
    <h3>Filters</h3>
    <p
      v-for="facet in facets"
      :key="facet.name"
      class="timeline-filters btn-group">
      <button
        type="button"
        class="btn btn-sm btn-outline-primary"
        disabled>{[ getFacetDisplayName(facet.name) ]}</button>
      <button 
        v-for="bucket in facet.buckets"
        :key="bucket.key"
        @click="filterTimeline(facet.name, timelineFacet(bucket.key))"
        :class="['filter btn btn-sm  btn-outline-dark', {active: timeline.filters[facet.name] === timelineFacet(bucket.key)}]"
        type="button">{[ bucket.key ]}
      </button>
    </p>
  </div>

  <div class="row">
    <div class="col-8">
      <ul class="list-inline">
        <li class="list-inline-item"><strong>Markers:</strong></li>
        <li class="list-inline-item"><span class="event zlarge"></span> Event</li>
        <li class="list-inline-item"><span class="resource source-text zlarge"></span> Source text</li>
        <li class="list-inline-item"><span class="resource translation zlarge"></span> Translation</li>
      </ul>
    </div>
    <div class="col text-right">
      <button type="button" class="btn btn-sm" disabled>View</button>
      <button
        v-for="z in zoomLevels"
        :key="z.level"
        @click="setZoom(z.style)"
        :class="['btn btn-sm btn-secondary', {active: zoom === z.style}]"
        type="button"
        >{[ z.level ]}</button>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Country/Year</th>
        <td
          v-for="(year, index) in timeline.years"
          :key="year">
          <span
            v-if="index == 0"
            :id="`${focusElement}0`"></span>
          <span
            v-if="year === 1805"
            :id="focusElement"></span>
          <span :class="['year', zoom]">{[ year ]}</span>
        </td>
      </tr>
    </thead>
    <tbody class="content">
      <tr
        v-for="(value, country, index) in timeline.data"
        :key="country"
        :class="country">
        <th>{[ country ]}</th>
        <td
          v-for="year in timeline.years"
          :key="year">
          <a
            v-for="item in timeline.data[country][year]"
            :key="item.uid">
            <span
              :class="['record', zoom, item.tags, { active: item.active, filtered: item.filtered }]"
              :title="`${item.country}, ${item.date}\n${item.title}`"
              @click="getTimelineDetail(country, year, item.record)"
              @mouseenter="highlight(item.record)"
              @mouseleave="highlight(null)">
            </span>
          </a>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<div
      :class="{'hidden': !timelineDetail.show }"
      class="event-info">
  <button
    v-on:click="timelineDetail.show = false"
    class="close close-event"
    type="button"
    aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
  <div v-if="timelineDetail.record">
    <h3>
      <a
        :href="`../${timelineDetail.record.type}s/${timelineDetail.record.id}/`">
        {[ timelineDetail.record.title ]} {[ timelineDetail.record.date ]}
      </a>
    </h3>
    <p class="metadata">
    <span
      v-for="tag in timelineDetail.record.tags"
      class="badge badge-info">{[ tag ]}</span>
    </p>
  </div>
  <hr>
  <h4>Other activity in {[ timelineDetail.country ]} in {[ timelineDetail.year ]}</h4>
  <ol>
    <li
      v-for="item in timelineDetail.data"
      :key="item.uid">
      <a :href="`../${item.type}s/${item.id}/`">{[ item.title ]} {[ item.date ]}</a>
      <span class="badge badge-info">{[ item.subtype ]}</span>
    </li>
  </ol>
</div>
