<div class="viz-grid">
  <ul class="breadcrumbs">
    <li>Resources:</li>
    <li><span class="resource source-text large"></span> Source text</li>
    <li><span class="resource translation large"></span> Translation</li>
    <li><span class="resource serial-publications large"></span> Serial publication</li>
  </ul>
  <ul class="breadcrumbs">
    <li>Events:</li>
    <li><span class="event large"></span> Event</li>
    <li><span class="event related large"></span> Related event</li>
  </ul>

  <ul class="breadcrumbs">
    <li>Zoom:</li>
    <li @click="setZoom('zsmall')">Small</li>
    <li @click="setZoom('')">Medium</li>
    <li @click="setZoom('zlarge')">Large</li>
  </ul>

  <ul 
      v-for="facet in facets"
      :key="facet.name"
      class="breadcrumbs">
    <li>{[ getFacetDisplayName(facet.name) ]}:</li>
    <li 
      v-for="bucket in facet.buckets"
      :key="bucket.key"
      @click="filterTimeline(timelineFacet(bucket.key))">{[ bucket.key ]}
    </li>
  </ul>

  <table>
    <thead>
      <tr>
        <th>Country/Year</th>
        <td
          v-for="(year, index) in timeline.years"
          :key="year">
          <span
            v-if="Math.round(timeline.years.length / 1.75) === index"
            :id="focusElement"></span>
          <span :class="['year', zoom]">{[ year ]}</span>
        </td>
      </tr>
    </thead>
    <tbody class="content">
      <tr
        v-for="(value, country, index) in timeline.data"
        :key="country">
        <th>{[ country ]}</th>
        <td
          v-for="year in timeline.years"
          :key="year">
          <a
            v-for="item in timeline.data[country][year]"
            :key="item.uid">
            <span
              :class="['record', zoom, item.tags, { active: item.active, filtered: item.filtered }]"
              :title="`${country}, ${item.date}\n${item.title}\n${item.tags}`"
              @click="getTimelineDetail(country, year, item.record)"
              @mouseenter="highlight(item.record)"
              @mouseleave="highlight(null)">
            </span>
          </a>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<div
      :class="{'hidden': !timelineDetail.show }"
      class="event-info">
  <button
    v-on:click="timelineDetail.show = false"
    class="close close-event"
    type="button"
    aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
  <div v-if="timelineDetail.record">
    <h3>
      <a
        :href="`../${timelineDetail.record.type}s/${timelineDetail.record.id}/`">
        {[ timelineDetail.record.title ]} {[ timelineDetail.record.date ]}
      </a>
    </h3>
    <p class="metadata">
    <span
      v-for="tag in timelineDetail.record.tags"
      class="badge badge-info">{[ tag ]}</span>
    </p>
  </div>
  <hr>
  <h4>Other activity in {[ timelineDetail.country ]} in {[ timelineDetail.year ]}</h4>
  <ol>
    <li
      v-for="item in timelineDetail.data"
      :key="item.uid">
      <a :href="`../${item.type}s/${item.id}/`">{[ item.title ]} {[ item.date ]}</a>
      <span class="badge badge-info">{[ item.subtype ]}</span>
    </li>
  </ol>
</div>
