{% load wagtailcore_tags wagtailimages_tags %}

<div class="children">
    {% if children %}
    <ul>
        {% for child in children %}
        <li class="child-page{% if child.image %} with-image{% endif %}">
            <a href="{% pageurl child %}">
                {% if child.image %}
                <div class="child-page-image">
                    {% image child.image fill-180x180-c100 %}
                </div>
                {% endif %}
            </a>

            <a href="{% pageurl child %}">
                <h2 class="child-page-title">{{ child.title }}</h2>

                {% if child.author %}
                <h3>{{ child.author }}, {{ child.first_published_at }}</h3>
                {% endif %}

                <div class="col">
                    <div class="row">
                        {% if child.introduction %}
                            <p class="child-page-introduction">
                                {{ child.introduction }}
                            </p>
                        {% endif %}
                    </div>
                </div>
            </a>
        </li>
        {% endfor %}
    </ul>

    {% include "kdl_wagtail_core/includes/pagination.html" with items=children %}

    {% else %}
    <p>No live pages found!</p>
    {% endif %}

</div>
